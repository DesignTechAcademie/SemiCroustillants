var module$customShapeLibraryManager={};
(function(){window.GLIFFY=window.GLIFFY||{};window.GLIFFY.ONLINE=window.GLIFFY.ONLINE||{};window.GLIFFY.ONLINE.INTEGRATION=window.GLIFFY.ONLINE.INTEGRATION||{};window.GLIFFY.ONLINE.INTEGRATION.customShapeLibraryManager={getCustomShapes:function(libraryUid,successCallback,errorCallback){GLIFFY.API.GET("customLibraries/"+libraryUid+"/shapes",{success:function(data){successCallback(data.shapes)},error:function(xhr,text,error){errorCallback(xhr,text,error)}})},getCustomLibrary:function(libraryUid,successCallback,
errorCallback){GLIFFY.API.GET("customLibraries/"+libraryUid,{success:function(data){var list=data;for(var i=0;i<list.length;i++)list[i].shapes=JSON.parse(list[i].shapes);successCallback(list)},error:function(xhr,text,error){errorCallback(xhr,text,error)}})},getCustomLibraryList:function(limit,offset,successCallback,errorCallback){GLIFFY.API.GET("customLibraries",{success:function(data){var list=data.libraries||[];for(var i=0;i<list.length;i++)list[i].shapes=null;successCallback(list);$("#modifyCustomLibrary .gliffy-custom-library-edit-permission").css("display",
"block")},error:function(xhr,text,error){errorCallback(xhr,text,error)}})},getFavoriteLibraryList:function(limit,offset,successCallback,errorCallback){GLIFFY.API.GET("favoriteLibraries",{success:function(data){var list=data.libraries||[];successCallback(list)},error:function(xhr,text,error){errorCallback(xhr,text,error)}})},removeFavoriteCustomLibrary:function(libraryUid,successCallback,errorCallback){GLIFFY.API.DELETE("favoriteLibraries/"+libraryUid,{success:function(data){successCallback(data)},
error:function(xhr,text,error){errorCallback(xhr,text,error)}})},markFavoriteCustomLibrary:function(libraryUid,successCallback,errorCallback){if(libraryUid)GLIFFY.API.PUT("favoriteLibraries/"+libraryUid,"",{success:function(data){successCallback(data)},error:function(xhr,text,error){errorCallback(xhr,text,error)}})},createCustomLibrary:function(library,successCallback,errorCallback){var self=this;GLIFFY.Spinner.show({context:"createCustomLibrary"});GLIFFY.API.PUT("customLibraries",library,{success:function(data){self.markFavoriteCustomLibrary(data.uid,
function(){successCallback(library)});library.uid=data.uid;library.owner=data.owner;successCallback(library,{});GLIFFY.Spinner.hide({context:"createCustomLibrary"})},error:function(xhr,text,error){errorCallback(xhr,text,error);GLIFFY.Spinner.hide({context:"createCustomLibrary"})}})},updateCustomLibrary:function(library,successCallback,errorCallback){GLIFFY.Spinner.show({context:"updateCustomLibrary"});GLIFFY.API.PUT("customLibraries/"+library.uid,library,{success:function(data){successCallback(library);
GLIFFY.Spinner.hide({context:"updateCustomLibrary"})},error:function(xhr,text,error){errorCallback(xhr,text,error);GLIFFY.Spinner.hide({context:"updateCustomLibrary"})}})},deleteCustomLibrary:function(libraryUid,successCallback,errorCallback){GLIFFY.API.DELETE("customLibraries/"+libraryUid,{success:function(data){successCallback(data)},error:function(xhr,text,error){errorCallback(xhr,text,error)}})}}})();