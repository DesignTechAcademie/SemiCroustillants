var module$editorUiObserver={};
(function(){function initializePopovers(){var isHidePopoversExperimentRunning=window.optimizely&&window.optimizely.GHAX&&window.optimizely.GHAX.hidePopovers;var shouldHidePopovers=isHidePopoversExperimentRunning&&window.optimizely.GHAX.hidePopovers.enabled===true;if(isHidePopoversExperimentRunning){var experimentVariationString="Original";var experimentVariation=0;if(shouldHidePopovers){$.cookie("feedbackCtr","never",{expires:365});experimentVariationString="Variation 1 (Hide Popovers)";experimentVariation=
1}Experiments.Utils.sendOptimizelyExperimentAnalyticsData(3387590762,experimentVariationString);if(GliffyApp.authController.isAuthenticated()){var accountId=GliffyApp.authController.getAccountId();Experiments.Utils.logOptimizelyExperimentToDB(3387590762,accountId,"optimizely",experimentVariation,{"experimentVariationString":experimentVariationString})}}if(!shouldHidePopovers)var popover=new GLIFFY.Popover({target:$("#gliffy-more-shapes-link"),title:$.i18n._("SHAPE_LIBRARY_TIP_TITLE"),content:$.i18n._("SHAPE_LIBRARY_TIP_CONTENT"),
placement:"ne",shouldShow:function(){return!GliffyApp.authController.getUserPreferences().get("SHAPE_LIBRARY_TIP_shown")},onHide:function(){if(GliffyApp.authController.isAuthenticated())GliffyApp.authController.setUserPreference("SHAPE_LIBRARY_TIP_shown","true")}})}function logInitAnalyticsEvents(){GLIFFY.Utils.analyticsEvent("trackEvent",{category:"time",action:"startup",value:((new Date).getTime()-window.GLIFFY.startTime)/1E3,non_interaction:true});var allowedCategories=["collaborate"];var url;
if(window.GLIFFY.ENV.gaCategoryOnInit&&window.GLIFFY.ENV.gaCategoryOnInit!==""&&window.GLIFFY.ENV.gaActionOnInit&&window.GLIFFY.ENV.gaActionOnInit!==""){if(allowedCategories.indexOf(window.GLIFFY.ENV.gaCategoryOnInit)>-1)GLIFFY.Utils.analyticsEvent("trackEvent",{category:window.GLIFFY.ENV.gaCategoryOnInit,action:window.GLIFFY.ENV.gaActionOnInit});else console.warn("eventCategory parameter not allowed!");url=GLIFFY.onlineUtils.updateQueryString("eventCategory",null,window.location.toString());url=
GLIFFY.onlineUtils.updateQueryString("eventAction",null,url);GLIFFY.onlineUtils.setLocation(url)}}function initEditor(editor){var panels;this.editor=editor;this.editor.imageExportType="image/png";panels=this.editor.newDiagramPanels;panels=["com.gliffy.libraries.basic.basic_v1.default","com.gliffy.libraries.flowchart.flowchart_v1.default","com.gliffy.libraries.swimlanes.swimlanes_v1.default"];if(editor.enableMru)panels.unshift("com.gliffy.libraries.mru");if(GLIFFY.FEATURES.umlV2){panels=panels.concat(["com.gliffy.libraries.uml.uml_v2.class"]);
panels=panels.concat(["com.gliffy.libraries.uml.uml_v2.sequence"]);panels=panels.concat(["com.gliffy.libraries.uml.uml_v2.activity"])}else if(GLIFFY.FEATURES.umlV1)panels=panels.concat(["com.gliffy.libraries.uml.uml_v1.default"]);panels=panels.concat(["com.gliffy.libraries.erd.erd_v1.default"]);if(GLIFFY.FEATURES.uiV3)panels=panels.concat(["com.gliffy.libraries.ui.ui_v3.containers_content","com.gliffy.libraries.ui.ui_v3.forms_controls"]);else panels=panels.concat(["com.gliffy.libraries.ui.ui_v2.forms_components"]);
panels=panels.concat(["com.gliffy.libraries.images"]);if(GliffyApp.shapeLibraryModel)if(!window.GLIFFY.ENV.openUrl&&!window.GLIFFY.ENV.openJson){GliffyApp.shapeLibraryModel.set("showFirstPanel",true);GliffyApp.shapeLibraryModel.addPanels(panels)}window.localStorage.clear();$("#gliffy-anchor-exit").attr("title","Exit Gliffy");$("#gliffy-anchor-exit").attr("data-original-title","Exit Gliffy");if(!GLIFFY.ENV.isAPI)createFileImportUploaderButton();if(GLIFFY.ENV.showUpgrade)GliffyApp.accountUpgradePurchaseController.show();
if(GliffyApp.authController.isAnonymousAccount())GLIFFY.onlineUtils.signupModalTimer=setTimeout(function(){if(GliffyApp.authController.isAnonymousAccount())GliffyApp.loginSignupController.show()},GLIFFY.ENV.signupModalTimerValue);var activePlugins=GLIFFY.PLUGINS.pluginManager.getActivePlugins();for(var pluginName in activePlugins)activePlugins[pluginName].init()}function initStartupMode(){window.name="gliffy"+GliffyApp.documentModel.get("id");var currentDocumentContext=$.url().param("currentDocumentContext");
if(currentDocumentContext)GLIFFY.PLUGINS.pluginManager.setCurrentDocumentContext(currentDocumentContext);if(window.GLIFFY.ENV.openUrl){GliffyApp.authController.requireAuth(function(){editor.open({url:window.GLIFFY.ENV.openUrl,scale:1})});if(window.GLIFFY.ENV.tempPassword)setTimeout(function(){GliffyApp.tempPasswordController.show()},100)}else if(window.GLIFFY.ENV.openJson)editor.open({json:window.GLIFFY.ENV.openJson,scale:1});else if(GLIFFY.ENV.welcomeController&&GliffyApp[GLIFFY.ENV.welcomeController]&&
GliffyApp[GLIFFY.ENV.welcomeController].show){if(GLIFFY.ENV.welcomeControllerMode)GliffyApp[GLIFFY.ENV.welcomeController].mode=GLIFFY.ENV.welcomeControllerMode;editor.open({jsonObj:editor.getDocumentManager().getActiveDocument().toObject(),scale:1});setTimeout(function(){if(window.GLIFFY.ENV.tempPassword)GliffyApp.tempPasswordController.show(function(){GliffyApp[GLIFFY.ENV.welcomeController].show()});else{var accountUserMetadata=GliffyApp.authController.account.accountUserMetadata;var accountMetaData=
GliffyApp.authController.account.accountMetadata;if(GliffyApp.authController.account.creatorId===GliffyApp.authController.user.uid&&typeof accountUserMetadata.id==="undefined"&&(typeof accountMetaData.organizationSizeMin==="undefined"&&typeof accountMetaData.organizationSizeMax==="undefined"||typeof accountMetaData.organizationSizeMin==="number"&&accountMetaData.organizationSizeMin>20))GliffyApp.accountUserAdditionalInfoController.show();else if(GliffyApp.trialSignupInviteModalController.newUserSignup)GliffyApp.trialSignupInviteModalController.show();
else GliffyApp[GLIFFY.ENV.welcomeController].show()}GLIFFY.editor.handleCreateNewTab()},100)}GliffyApp.authController.expirationTest();if(window.GLIFFY.ENV.newDiagramFolderId)GliffyApp.documentModel.set("folderId",Number(window.GLIFFY.ENV.newDiagramFolderId));GliffyApp.documentModel.addObserver("title",function(){updateUIForDocumentModel();GLIFFY.onlineUtils.setWindowTitle(GliffyApp.documentModel.title)});GliffyApp.documentModel.addObserver("unsavedChanges",function(){updateUIForDocumentModel()});
GliffyApp.documentModel.addObserver("currentRevision",function(){updateUIForDocumentModel()});GliffyApp.documentModel.addObserver("isPublic",function(){updateUIForDocumentModel()});GliffyApp.documentModel.addObserver("currentRevision",function(){updateUIForDocumentModel()});GliffyApp.documentModel.addObserver("gridVisible",function(){updateUIForDocumentModel()});GliffyApp.documentModel.addObserver("pageColor",function(){updateUIForDocumentModel()});GliffyApp.shapeLibraryModel.addObserver("panels",
function(){setTimeout(function(){GliffyApp.authController.updatePremiumLibraries()},500)});$("#manageLibrary").on("hide",function(e){GliffyApp.authController.updatePremiumLibraries()})}function updateUIForDocumentModel(){GliffyApp.documentTabsController.updateTabText();GliffyApp.documentPropertiesController.updateUI();if(GliffyApp.documentModel.get("currentRevision")>0){$(".gliffy-filemenu-revisionhistory").show();$(".gliffy-filemenu-rename").show();$(".gliffy-filemenu-saveAs").show()}else{$(".gliffy-filemenu-revisionhistory").hide();
$(".gliffy-filemenu-rename").hide();$(".gliffy-filemenu-saveAs").hide()}}function createFileImportUploaderButton(){var importAction=GLIFFY.FEATURES.browserTabs?"upload_file.json?accountId\x3d"+GliffyApp.authController.getAccountId():"import_file.json";var importOptions={url:window.GLIFFY.API.getActionUrl(importAction,null),allowExtensions:[GliffyApp.fileUploadController.FILE_EXTENSION_GON,GliffyApp.fileUploadController.FILE_EXTENSION_GXML,GliffyApp.fileUploadController.FILE_EXTENSION_GLIFFY,GliffyApp.fileUploadController.FILE_EXTENSION_VDX,
GliffyApp.fileUploadController.FILE_EXTENSION_VSDX,GliffyApp.fileUploadController.FILE_EXTENSION_JPG,GliffyApp.fileUploadController.FILE_EXTENSION_JPEG,GliffyApp.fileUploadController.FILE_EXTENSION_GIF,GliffyApp.fileUploadController.FILE_EXTENSION_PNG],buttonText:$.i18n._("online.welcome.import")+"...",click:function(e){GLIFFY.Utils.analyticsEvent("trackEvent",{category:"menuClick",action:"import"});setTimeout(function(){$(".gliffy-filemenu-import .gliffy-file-upload-button").css("background-color",
"#FFFFFF")},100);if(!GliffyApp.authController.isAuthenticated()){GliffyApp.loginSignupController.show();$(".gliffy-filemenu").click();return false}}};GliffyApp.fileUploadController.createFileUploaderButton($(".gliffy-nav-menus .gliffy-filemenu-import .gliffy-file-upload-button"),importOptions).bind("gliffy_fileUploadSuccess",function(e,response){GliffyApp.progressBarController.hide();if(response.data.type=="image"){GLIFFY.Dialog.showAlertDialog({title:$.i18n._("IMAGEUPLOAD_SUCCESS"),content:$.i18n._("online.file.upload.import.image.success"),
buttons:[{text:$.i18n._("DIALOG_OK"),primary:true,dismiss:true}]});if(typeof GliffyApp.imageBrowserController!="undefined")GliffyApp.imageBrowserController.handleSearch("")}else{var options={callback:function(){GLIFFY.editor.handleCreateNewTab()}};if(GLIFFY.FEATURES.browserTabs)GliffyApp.fileUploadController.importDocument();else GLIFFY.editor.createUntitledTab(function(){GLIFFY.editor.openTemplateFromGON(response.data.diagram,options);GLIFFY.editor.handleCreateNewTab()})}GLIFFY.Utils.analyticsEvent("trackEvent",
{category:"import",action:"importSuccess",label:"fileMenu;"+GLIFFY.onlineUtils.getFileHandle(response.filename)})}).bind("gliffy_fileUploadError",function(e,response){GliffyApp.progressBarController.hide();GLIFFY.Dialog.showAlertDialog({title:$.i18n._("ERRORHANDLER_ERROR"),content:$.i18n._("online.file.upload.import.error")+" "+response.reason+".  "+$.i18n._("online.file.upload.import.error.action"),buttons:[{text:$.i18n._("DIALOG_OK"),primary:true,dismiss:true}]});GLIFFY.Utils.analyticsEvent("trackEvent",
{category:"import",action:"importError",label:response.reason+";fileMenu;"+GLIFFY.onlineUtils.getFileHandle(response.filename)})}).bind("gliffy_fileUploadProgress",function(e,response){GliffyApp.progressBarController.updateProgress(response.currentSize,response.totalSize)}).bind("gliffy_fileUploadStart",function(e,filename){GliffyApp.progressBarController.show($.i18n._("online.welcome.importing")+" "+filename)});GliffyApp.authController.addLoginCallback(function(){GliffyApp.fileUploadController.updateOptions($(".gliffy-filemenu-import .gliffy-file-upload-button"),
{url:window.GLIFFY.API.getActionUrl("import_file.json",null),allowExtensions:[GliffyApp.fileUploadController.FILE_EXTENSION_GON,GliffyApp.fileUploadController.FILE_EXTENSION_GXML,GliffyApp.fileUploadController.FILE_EXTENSION_GLIFFY,GliffyApp.fileUploadController.FILE_EXTENSION_VDX,GliffyApp.fileUploadController.FILE_EXTENSION_VSDX],buttonText:$.i18n._("online.welcome.import")+"..."})})}function refreshEditorAfterOAuth(){GliffyApp.authController.refreshAccountSettings(GliffyApp.loginSignupController.resumeExplicit,
null)}function bindPrintAnalytics(){$("#gliffy-filemenu-print").on("click",function(){GLIFFY.analyticsUtils.logMixpanelEvent("printMenuClick",{});if(Experiments&&Experiments.PromoteTeamPricingInPrint)Experiments.PromoteTeamPricingInPrint.showPrintMessage()})}function addTopLevelItem(menuId,label,itemId,clickEvent){$("div.navbar-fixed-top ul.pull-right").prepend('\x3cli class\x3d"dropdown"\x3e\x3ca class\x3d"dropdown-top-menu dropdown-toggle" href\x3d"#" id\x3d"'+itemId+'"\x3e\x3cspan id\x3d"gliffy-menu-label-'+
itemId+'"\x3e'+label+"\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e");$("#"+itemId).click(function(e){e.preventDefault();clickEvent()})}function addTopLevelMenu(label,menuId){$("div.navbar-fixed-top ul.pull-right").prepend('\x3cli class\x3d"dropdown" id\x3d"'+menuId+'"\x3e'+'\x3ca class\x3d"dropdown-toggle" data-toggle\x3d"dropdown" href\x3d"#'+menuId+'"\x3e\x3cspan id\x3d"gliffy-menu-label-'+menuId+'"\x3e'+label+'\x3c/span\x3e \x3cb class\x3d"caret"\x3e \x3c/b\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu" id\x3d"sub-'+
menuId+'"\x3e\x3c/ul\x3e \x3c/li\x3e')}function addTopLevelMenuItem(menuId,label,itemId,clickEvent){$("#sub-"+menuId).append('\x3cli\x3e\x3ca href\x3d"#" id\x3d"'+itemId+'"\x3e\x3cspan id\x3d"gliffy-menu-label-'+itemId+'"\x3e'+label+"\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e");$("#"+itemId).click(function(e){e.preventDefault();clickEvent()})}function hideToolbarItems(){$(".gliffy-toolbar-btns .gliffy-logo").parent().hide()}function disableImageExportIfFreeAccount(){var FREE_IMAGE_EXPORT_CUTOFF_DATE=new Date(2015,
10,1,0,0,0,0);var isAccountCreatedBeforeLegacyCutoff=new Date(GliffyApp.authController.getAccountCreateDate())<FREE_IMAGE_EXPORT_CUTOFF_DATE;var isNonLegacyTrialOrFreeUser=!isAccountCreatedBeforeLegacyCutoff&&(GliffyApp.authController.get("propIsFreeAccount")||GliffyApp.authController.isTrialAccount());if(!GliffyApp.authController.isAuthenticated()||GliffyApp.authController.isAnonymousAccount()||isNonLegacyTrialOrFreeUser)disableNonGliffyExportFormats();else enableNonGliffyExportFormats()}function hidePurchaseButtonAndText(){GLIFFY.Utils.analyticsEvent("trackEvent",
{category:"disableExportDialog",action:"exportDisabledExportButtonClicked"});$(".gliffy-export-dialog-subscribe-text").hide();$(".gliffy-export-dialog-subscribe-btn").hide()}function disableExportClick(){GLIFFY.Utils.analyticsEvent("trackEvent",{category:"disableExportDialog",action:"exportDisabledPurchaseButtonClicked"});var request=$.ajax({type:"POST",url:"/go/commerce/saveoptions",data:"accountType\x3dBusiness\x26userCount\x3d5\x26billingPeriod\x3dMonthly"});request.done(function(){window.location.href=
"/go/commerce/purchase"});request.error(function(error){console.warn=console.warn?console.warn:[];console.warn(error)})}function enableNonGliffyExportFormats(){setTimeout(function(){var dialog=$(".gliffy-export-dialog");dialog.find("label").removeClass("gliffy-export-dialog-disabled");dialog.find('[for\x3d"gliffy-export-Gliffy"]').removeClass("gliffy-export-Gliffy-disabled");dialog.find(".gliffy-export-percent").removeClass("gliffy-export-dialog-disabled");dialog.find("#gliffy-export-PNG").prop("checked",
true);dialog.find('[name\x3d"gliffy-export-size"]').removeAttr("disabled");dialog.find('[name\x3d"gliffy-export-format"]').attr("disabled");dialog.find(".gliffy-export-dialog-subscribe-btn").off("click",disableExportClick);var exportFooter=$(".gliffy-export-dialog").closest(".modal").find(".modal-footer");var exportButtons=exportFooter.find("button.btn.gliffy-btn-primary");if(exportButtons&&exportButtons.length>0)$(exportButtons[0]).off("click",hidePurchaseButtonAndText)},100)}function disableNonGliffyExportFormats(){setTimeout(function(){var dialog=
$(".gliffy-export-dialog");dialog.find("label").addClass("gliffy-export-dialog-disabled");dialog.find('[for\x3d"gliffy-export-Gliffy"]').addClass("gliffy-export-Gliffy-disabled");dialog.find(".gliffy-export-percent").addClass("gliffy-export-dialog-disabled");dialog.find("#gliffy-export-Gliffy").prop("checked",true);dialog.find('[name\x3d"gliffy-export-size"]').attr("disabled",true);dialog.find('[name\x3d"gliffy-export-format"]').attr("disabled",true);var exportFooter=dialog.closest(".modal").find(".modal-footer");
exportFooter.prepend("\x3cspan class\x3d'gliffy-export-dialog-subscribe-text'\x3e"+$.i18n._("DISABLED_EXPORT_TRIAL_TEXT")+"\x3c/span\x3e\x3ca href\x3d'#' class\x3d'btn gliffy-export-dialog-subscribe-btn'\x3e"+$.i18n._("DISABLED_EXPORT_TRIAL_BUTTON_TEXT")+"\x3c/a\x3e");exportFooter.find(".gliffy-export-dialog-subscribe-btn").on("click",disableExportClick);var exportButtons=exportFooter.find("button.btn.gliffy-btn-primary");if(exportButtons&&exportButtons.length>0)$(exportButtons[0]).on("click",hidePurchaseButtonAndText)},
100)}window.GLIFFY=window.GLIFFY||{};window.GLIFFY.ONLINE=window.GLIFFY.ONLINE||{};window.GLIFFY.ONLINE.INTEGRATION=window.GLIFFY.ONLINE.INTEGRATION||{};var __editorIsReady=false;var __queuedEditorActions=[];var __queuedEditorActionHelper={insertAfterWhenEditorReady:function(action){if(__editorIsReady)$(action.targetSelector).after($(action.selector).html());else __queuedEditorActions.push({action:"insertAfterWhenEditorReady",selector:action.selector,targetSelector:action.targetSelector})}};window.GLIFFY.ONLINE.INTEGRATION.editorUiObserver=
{insertAfterWhenEditorReady:function(selector,targetSelector){__queuedEditorActionHelper.insertAfterWhenEditorReady({selector:selector,targetSelector:targetSelector})},onEditorReady:function(editor){initEditor(editor);initStartupMode();if(!GliffyApp.authController.isAuthenticated()&&GLIFFY.editor.getDocumentManager().getDraftManager&&GLIFFY.editor.getDocumentManager().getDraftManager())GLIFFY.editor.getDocumentManager().getDraftManager().disable();else{window.dataLayer=window.dataLayer||[];dataLayer.push({"event":"Loaded",
"uniqueID":GliffyApp.authController.user.username,"userCreatedAtUnix":GliffyApp.authController.user.createdDate,"product":"Online","isPaid":GliffyApp.authController.isPaidAccount().toString(),"isTrial":GliffyApp.authController.isTrialAccount(),"accountNumUsers":GliffyApp.authController.getAccountMaxUsers()})}__editorIsReady=true;_.each(__queuedEditorActions,function(r){__queuedEditorActionHelper[r.action](r)});$(".gliffy-filemenu-new").show();$(".gliffy-filemenu-import").show();$(".gliffy-filemenu-saveAs").show();
$(".help-menu-send-feedback").click(function(){GliffyApp.feedbackController.show()});GLIFFY.toolbarController.toggleThemes();$("#gliffy .navbar ul.nav li#menu-account").insertAfter($("#gliffy .navbar ul.nav li#menu1"));hideToolbarItems();$("#gliffy-document-properties-checkbox-exportborder").parent().hide();$("#gliffy").delegate(".gliffy-modal","show",function(){$(".gliffy-sidebar.scrollable").css("overflow-y","hidden")});$("#gliffy").delegate(".gliffy-modal","hide",function(){$(".gliffy-sidebar.scrollable").css("overflow-y",
"auto")});$(".gliffy-help-menu-link-eula a").attr("href","/legal/terms-of-use");var contextToPrefixMap={gliffyDrivePlugin:$.i18n._("online.gliffy")+" / ",googleDrivePlugin:$.i18n._("gdrive.google.drive")+" / "};if(GLIFFY.FEATURES.browserTabs){$(".gliffy-filemenu-saveAndClose").hide();$(".gliffy-filemenu-close").hide();$("#gliffy-tabs-button-add").parent().hide();$("#gliffy-anchor-exit").addClass("gliffy-browserTabs-mode");$("#gliffy .gliffy-toolbar-btns .gliffy-buttons-right").addClass("gliffy-browserTabs-mode");
$("#gliffy").on("gliffy.document_tab_updated",function(){$("#gliffy-tabs-container .gliffy-document-tab a \x3e div").prepend('\x3cspan id\x3d"tab-title-context-prefix" class\x3d"tab-title-context-prefix"\x3e'+contextToPrefixMap[GLIFFY.PLUGINS.pluginManager.getCurrentDocumentContext()]+"\x3c/span\x3e");$(".gliffy-document-tab").addClass("gliffy-browserTabs-mode")});$("body").on("gliffy.display-draft-status",function(){$("#gliffy-draft-status").addClass("gliffy-browserTabs-mode")})}$("#menu-username .dropdown-toggle").tooltip(GLIFFY.Editor.TOOLTIP_OPTIONS_STANDARD);
GliffyApp.googleDriveController.setMenu();if(GliffyApp.authController.isAnonymousAccount()){window.optimizely=window.optimizely&&window.optimizely.push?window.optimizely:[];window.optimizely.push(["trackEvent","Anonymous"]);if(typeof mktoMunchkinFunction=="function"&&GliffyApp.authController.getMunchkinKey())mktoMunchkinFunction("visitWebPage",{url:"/go/application/tryApp"});GLIFFY.analyticsUtils.logMixpanelEvent("tryApp",{})}$(window).bind("focus",function(e){if(GliffyApp.authController.isAuthenticated()){GliffyApp.authController.refreshAccountSettings();
GliffyApp.authController.fetchUser()}windowHasFocus=true});$(window).bind("blur",function(e){windowHasFocus=false});if(GliffyApp.authController.hasAccount()&&GliffyApp.authController.getGoogleDriveUserIcon())$(".gliffy-profile-icon").css({"background-size":"20px 20px","background-position":"right","background-image":"url("+GliffyApp.authController.getGoogleDriveUserIcon()+")"});GliffyApp.authController.authLibraryCreate();$.cookie("feedbackCtr","never",{expires:365});$(".gliffy-filemenu-export").on("click",
function(){disableImageExportIfFreeAccount()});$(".gliffy-filemenu-revisionhistory").find("a").on("click",function(){GliffyApp.versionHistoryController.disableRevisionHistory()});if(window.Experiments&&window.Experiments.Utils)window.Experiments.Utils.load();logInitAnalyticsEvents();bindPrintAnalytics();$(".gliffy-filemenu-saveAs").remove();this.triggerEditorReady()},triggerEditorReady:_.once(function(){$("body").trigger("editorReady")}),onRendered:function(){GLIFFY.Spinner.hide({context:"editorLoad"});
$(window).trigger("gliffy-render-complete")},onTabsAllClosed:function(editor){window.close();if(GLIFFY.ENV.returnUrl&&GLIFFY.ENV.returnUrl.length>1)window.location=GLIFFY.ENV.returnUrl;else if(GLIFFY.FEATURES.browserTabs)window.location="/";else window.location="/go/ologout?app\x3d"+window.GLIFFY.ENV.app},onUnloading:function(e){if(GLIFFY.FEATURES.browserTabs&&GLIFFY.BrowserDetect.browser==="Firefox"&&!GLIFFY.editor.unsavedChanges()&&!windowHasFocus){if(e)e.returnValue="This page will reload.";return"This page will reload."}else{var warningString=
$.i18n._("EDITOR_YOU_HAVE_UNSAVED_CHANGES.");if(GLIFFY.editor.unsavedChanges()){if(e)e.returnValue=warningString;return warningString}}},onPluginsReady:function(){$(".gliffy-sidebar-loading").hide()},onError:function(errObj){if(typeof Zenbox!=="undefined"){Zenbox.init({dropboxID:"20082230",url:"https://gliffy.zendesk.com",tabID:"Support",tabColor:"black",tabPosition:"Left",hide_tab:"true",request_subject:"Error: Gliffy Online",request_description:encodeURIComponent(errObj.report)});Zenbox.show()}},
onFeedbackClick:function(){GliffyApp.feedbackController.show()},onTabClosed:function(document){self.close();window.location="/go/ologout?app\x3d"+window.GLIFFY.ENV.app},onTabAdding:function(){GLIFFY.editor.createUntitledTab(function(){GLIFFY.editor.handleCreateNewTab();GliffyApp.welcomeScreenController.show()})}}})();